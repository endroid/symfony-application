language: php

services:
  - elasticsearch

addons:
  mariadb: 10.3

php:
  - 7.2

before_install:
  - echo "memory_limit = -1" > travis.php.ini
  - phpenv config-add travis.php.ini
  - composer self-update
  - composer install --prefer-dist --no-interaction --no-progress

script:
  - cp development/.env.travis development/.env
  - ./build
  - cd symfony-start
  - bin/setup test
  - bin/console server:run 0.0.0.0:9090 -q &
  - bin/test

notifications:
  email: info@endroid.nl
